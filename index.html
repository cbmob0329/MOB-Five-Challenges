<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no" />
<title>MOB GAME SELECT</title>
<meta name="theme-color" content="#0b0c10" />
<style>
  :root{
    --bg:#0b0c10; --panel:#141822; --panel2:#1a2030; --fg:#e9eef7; --dim:#9aa3b2;
    --accent:#13c4ff; --accent2:#ff3e7f; --ok:#25d366; --warn:#ffb020; --btn:#1c2333; --btn2:#222b3f;
  }
  /* iOSアドレスバー対策 */
  html { height: -webkit-fill-available; }
  body {
    margin:0; color:var(--fg);
    background:linear-gradient(160deg, #0b0c10 0%, #0c111a 60%, #0b0c10 100%);
    min-height:100vh; min-height: -webkit-fill-available;
    font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Hiragino Sans", "Noto Sans JP", "Yu Gothic", sans-serif;
  }
  #wrap{ display:grid; grid-template-rows:auto 1fr auto; min-height:100vh; }
  header{
    position:sticky; top:0; z-index:10;
    background:rgba(10,14,24,.75); backdrop-filter: blur(8px);
    border-bottom:1px solid #1d2434;
    padding:14px 16px;
    display:flex; align-items:center; justify-content:space-between; gap:12px;
  }
  .ttl{ font-weight:700; letter-spacing:.4px; }
  .sub{ color:var(--dim); font-size:.9rem }
  main{ display:grid; place-items:center; padding:20px }
  .grid{
    width:min(980px, 96vw);
    display:grid; gap:16px;
    grid-template-columns: 1fr; 
  }
  @media (min-width:680px){
    .grid{ grid-template-columns: 1fr 1fr; }
  }
  .card{
    background:linear-gradient(180deg,var(--panel) 0%, var(--panel2) 100%);
    border:1px solid #1e2638; border-radius:18px; overflow:hidden;
    box-shadow:0 8px 24px rgba(0,0,0,.35);
    display:flex; flex-direction:column; min-height:200px;
  }
  .hero{
    height:140px; display:flex; align-items:center; justify-content:center;
    background:
      radial-gradient(120px 80px at 20% 20%, #152034 0%, transparent 70%),
      radial-gradient(140px 90px at 80% 30%, #2a1740 0%, transparent 70%),
      radial-gradient(160px 100px at 50% 80%, #0c2a3a 0%, transparent 70%);
    border-bottom:1px solid #1e2638;
  }
  .badge{
    font-weight:800; letter-spacing:.6px; font-size:1.1rem;
    padding:10px 14px; border-radius:999px; 
    background:#0f1524; border:1px solid #23304a;
    box-shadow:inset 0 0 0 1px rgba(255,255,255,.03);
  }
  .row{ display:flex; align-items:center; justify-content:center; gap:8px }
  .row .pill{
    padding:6px 10px; border-radius:999px; font-size:.8rem; color:#b6c3db;
    border:1px solid #24314b; background:#131b2b;
  }
  .body{ padding:14px 14px 16px; display:grid; gap:12px }
  .title{ font-weight:800; font-size:1.1rem }
  .desc{ color:#b2bdd3; font-size:.92rem; line-height:1.45 }
  .actions{ display:flex; gap:10px; flex-wrap:wrap }
  .btn{
    flex:1 1 auto; min-width:140px;
    background:linear-gradient(180deg,var(--btn) 0%, var(--btn2) 100%);
    border:1px solid #24314b; color:#e8f1ff; font-weight:700; letter-spacing:.3px;
    padding:12px 14px; border-radius:12px; cursor:pointer; text-align:center;
    box-shadow:0 6px 18px rgba(0,0,0,.25);
    touch-action:manipulation; user-select:none; -webkit-tap-highlight-color: transparent;
  }
  .btn:active{ transform:translateY(1px) }
  .btn.accent{ border-color:#124b68; background:linear-gradient(180deg,#0d4668 0%, #0b344e 100%); }
  .btn.warn{ border-color:#5c2a3e; background:linear-gradient(180deg,#5d1c37 0%, #44142a 100%); }
  footer{
    color:#8fa1c2; font-size:.85rem; padding:14px 16px; text-align:center; opacity:.8
  }
  /* iPhoneの下部ジェスチャー領域に配慮 */
  .safe-bottom{ padding-bottom: max(16px, env(safe-area-inset-bottom)); }
</style>
</head>
<body>
<div id="wrap">
  <header>
    <div>
      <div class="ttl">MOB GAME SELECT</div>
      <div class="sub">Choose a game to play</div>
    </div>
  </header>

  <main>
    <div class="grid">
      <!-- KART CHALLENGE -->
      <section class="card">
        <div class="hero">
          <div class="row">
            <span class="badge">🏁 KART CHALLENGE</span>
            <span class="pill">Runner</span>
            <span class="pill">Touch</span>
          </div>
        </div>
        <div class="body">
          <div class="title">MOB KART CHALLENGE</div>
          <div class="desc">サーキットを駆け抜ける横スクロールランナー。スマホ操作最適化。</div>
          <div class="actions">
            <a class="btn accent" href="./KART-CHALLENGE.html">Play Now</a>
            <button class="btn" data-open="KART-CHALLENGE.html">Open in this page</button>
          </div>
        </div>
      </section>

      <!-- Osoji Viran -->
      <section class="card">
        <div class="hero">
          <div class="row">
            <span class="badge">🧽 Scrub Viran!</span>
            <span class="pill">Action</span>
            <span class="pill">Touch</span>
          </div>
        </div>
        <div class="body">
          <div class="title">Osoji Viran</div>
          <div class="desc">Viranを「スクラブ」してお掃除撃退！カジュアル・コミカルなアクション。</div>
          <div class="actions">
            <a class="btn accent" href="./Osoji-Viran.html">Play Now</a>
            <button class="btn" data-open="Osoji-Viran.html">Open in this page</button>
          </div>
        </div>
      </section>
    </div>

    <!-- 埋め込みプレイ用のビュー -->
    <div id="embedWrap" style="width:min(980px,96vw);margin:18px auto 0;display:none;">
      <div style="display:flex;gap:8px;align-items:center;justify-content:space-between;margin:0 0 8px 0;">
        <strong id="embedTitle">Embedded View</strong>
        <div>
          <button class="btn warn" id="closeEmbed">Close</button>
          <a class="btn accent" id="openTab" href="#" target="_blank" rel="noopener">Open in new tab</a>
        </div>
      </div>
      <iframe id="frame" title="Game" style="width:100%;height:72vh;border:1px solid #1e2638;border-radius:12px;background:#000;"></iframe>
      <div class="safe-bottom"></div>
    </div>
  </main>

  <footer>© MOB-series / Game Launcher</footer>
</div>

<script>
  // 「このページで開く」ボタン → iframeで読み込み
  document.querySelectorAll("[data-open]").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      const url = btn.getAttribute("data-open");
      const w = document.getElementById("embedWrap");
      const f = document.getElementById("frame");
      const t = document.getElementById("embedTitle");
      const openTab = document.getElementById("openTab");
      f.src = url;
      openTab.href = url;
      t.textContent = "Playing: " + url;
      w.style.display = "block";
      // 記憶
      try{ localStorage.setItem("lastGame", url); }catch(e){}
      // スクロール
      w.scrollIntoView({behavior:"smooth", block:"start"});
    }, {passive:true});
  });

  // 閉じる
  document.getElementById("closeEmbed").addEventListener("click", ()=>{
    const w = document.getElementById("embedWrap");
    const f = document.getElementById("frame");
    f.src = "about:blank";
    w.style.display = "none";
  }, {passive:true});

  // 前回の選択を復元（任意）
  try{
    const last = localStorage.getItem("lastGame");
    if(last){
      const btn = document.querySelector(`[data-open="${last}"]`);
      if(btn){ btn.click(); }
    }
  }catch(e){}
</script>
</body>
</html>
